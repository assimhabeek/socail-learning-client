<mat-drawer-container class="sl-container">
  <mat-drawer #drawer mode="side" position="end" opened="true" fixedInViewport="true" class="drawer mat-elevation-z4">
    <mat-nav-list dense>
      <h3 mat-subheader class="sl-primary-background">
        <b>{{'PEOPLE' | translate}}</b>
      </h3>
      <mat-list-item *ngFor="let user of users">
        <img matListAvatar [src]="user.profileImage" />
        <h6 mat-line>
          <b>{{ user.lastName + ' ' + user.firstName | uppercase}}</b>
        </h6>
        <p mat-line>{{ user.about }}</p>
        <button mat-icon-button (click)="sendChatRequest(user.id)" color="primary" matTooltip="{{'SEND_CHAT_REQUEST' | translate}}">
          <mat-icon>chat</mat-icon>
        </button>
        <button mat-icon-button color="accent" matTooltip="{{'SEND_FRIEND_REQUEST' | translate}}">
          <mat-icon>add</mat-icon>
        </button>
        <mat-divider></mat-divider>
      </mat-list-item>
    </mat-nav-list>
    <mat-nav-list dense>
      <h3 mat-subheader class="sl-primary-background">
        <b>{{'FRIENDS' | translate}}</b>
      </h3>
      <mat-list-item *ngFor="let user of users">
        <img matListAvatar [src]="user.profileImage" />
        <h6 mat-line>
          <b>{{ user.lastName + ' ' + user.firstName | uppercase}}</b>
        </h6>
        <p mat-line>{{ user.about }}</p>
        <span class="space"></span>
        <button mat-icon-button (click)="sendChatRequest(user.id)" color="primary" matTooltip="{{'SEND_CHAT_REQUEST' | translate}}">
          <mat-icon>chat</mat-icon>
        </button>
        <button mat-icon-button color="warn" matTooltip="{{'DELETE_FRIEND' | translate}}">
          <mat-icon>delete</mat-icon>
        </button>
        <mat-divider></mat-divider>
      </mat-list-item>
    </mat-nav-list>
  </mat-drawer>

  <div class="drawer-content">
    <mat-card class="sl-chat-space" *ngIf="selectedUser">
      <mat-card-header>
        <div class="profile">
          <span>
            <img [src]="selectedUser.profileImage" />
          </span>
          <span>
            <h3>
              <b>{{ selectedUser.lastName + ' ' + selectedUser.firstName | uppercase}}</b>
            </h3>
            <p>{{ selectedUser.about }}</p>
          </span>
        </div>
      </mat-card-header>
      <mat-divider></mat-divider>
      <mat-card-content>
        <mat-chip-list>
          <div class="chat-message chat-message" [class.right]="msg.senderId==currentUser.id" *ngFor="let msg of messages">
            <mat-chip [color]="msg.senderId==currentUser.id ? 'primary' : 'accent'" selected="true">
              {{msg.message}}
            </mat-chip>
            <p>{{msg.messageDate | timeAgo}}</p>
          </div>
        </mat-chip-list>
      </mat-card-content>

      <mat-card-actions>
        <form #chatForm="ngForm" (ngSubmit)="sendMessage(chatForm.valid)">
          <mat-form-field>
            <textarea matInput [(ngModel)]="newMessage.message" autocomplete="message" matTextareaAutosize [required]="true" matAutosizeMinRows="1"
              matAutosizeMaxRows="5" #message="ngModel" name="message"></textarea>
          </mat-form-field>
          <button mat-raised-button type="submit" color="primary">
            <mat-icon>send</mat-icon>
            {{'SEND' | translate}}
          </button>
        </form>
      </mat-card-actions>
    </mat-card>
  </div>
</mat-drawer-container>